<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Automation for the Win! &mdash;  1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/single.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/common.js"></script>
    <script type="text/javascript" src="_static/slides.js"></script>
    <script type="text/javascript" src="_static/sync.js"></script>
    <script type="text/javascript" src="_static/controller.js"></script>
    <script type="text/javascript" src="_static/init.js"></script>
    
    <link rel="top" title=" 1.0 documentation" href="#" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  <article class="slide level-1" id="automation-for-the-win">
<h1>Automation for the Win!</h1>
<div class="line-block">
<div class="line">By: Randy Syring</div>
<div class="line">Twitter: &#64;RandySyring</div>
<div class="line">Email: <a class="reference external" href="mailto:randy&#46;syring&#37;&#52;&#48;level12&#46;io">randy<span>&#46;</span>syring<span>&#64;</span>level12<span>&#46;</span>io</a></div>
<div class="line"><a class="reference external" href="https://github.com/rsyring/">https://github.com/rsyring/</a></div>
</div>
<blockquote class="epigraph">
<div>Impassioned Software Craftsmanship</div></blockquote>
<img alt="_images/level12-logo.png" src="_images/level12-logo.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Presentation title</li>
</ul>
</div>

</article>
<article class="slide level-2" id="introduction">
<h2>Introduction</h2>
<img alt="_images/level12-logo.png" class="align-right" src="_images/level12-logo.png" />
<p>I'm the Chief Executive Developer at <a class="reference external" href="https://www.level12.io/">Level 12</a>.</p>
<p>Level 12 is software development firm
specializing in web and data(base) projects tailor made for our customers.</p>
<p>Agile methodologies make our customers happy...really, really, happy.</p>
<p>Why should you care?</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>I'm the founder of Level 12.  I've been working with databases and web applications for
for over 15 years.</li>
<li>I've been working directly with customers on custom projects for about 12 years.</li>
<li>My customers aren't &quot;big players.&quot;</li>
<li>They are generally naive about software development best practices.</li>
<li>They generally care about our responsiveness, product quality, and cost.</li>
<li>If we can make time for automation, it's likely you can too.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="my-real-world-ymmv">
<h2>My &quot;real world&quot;, YMMV</h2>
<ul class="simple">
<li>Methods &amp; concepts refined over last 8 years</li>
<li>Primarily involved with web &amp; data(base) development</li>
<li>Not operating <em>&quot;at scale&quot;</em></li>
<li>These are &quot;Best Practices&quot; and I'm a slow adopter</li>
<li>Your context will differ, that's ok!</li>
</ul>

</article>
<article class="slide level-2" id="what-s-your-real-world">
<h2>What's your real world?</h2>
<ul class="build simple">
<li>Developer, QA, Management, or ?</li>
<li>Full or multi-stack developers?</li>
<li>Small business, medium business, enterprise, mammoth?</li>
<li>Have solid automated testing and processes in place?</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>BUILD!!</li>
</ul>
</div>

</article>
<article class="slide level-2" id="this-presentation">
<h2>This Presentation</h2>
<ul class="simple">
<li>Encouragement</li>
<li>Technical summary of layers involved</li>
<li>Questions</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>NOT going to show in-depth config or coding</li>
<li>I really would like interaction</li>
<li>If you are one of those people that loves to answer questions, wait about 4 seconds and then
feel free to hop in.  If I ask a question, it's probably not rhetorical.</li>
<li>If it was meant to be rhetorical, I might make fun of you a little, but...don't worry...
I promise it's not personal.</li>
<li>Seriously, I want to get the thinking juices going.  Please speak up.</li>
<li>If you stump me, you can all laugh a bit, and don't worry, I won't take it personal.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="learning-curve-paralysis">
<h2>Learning Curve Paralysis</h2>
<p>Technology fatigue is real, but this is worth it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>technology fatigue is worst when?</li>
<li>Yes, at conferences!!!</li>
<li>Who has attended conferences before?  How many things do you actually follow up on?</li>
<li>One piece of advice: take one thing away from this conference that you will act on, maybe two.</li>
<li>This really, really, really is worth it.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="my-goal">
<h2>My Goal?</h2>
<img alt="_images/meme.jpg" class="fullpic" src="_images/meme.jpg" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>NO!</li>
<li>I'm not on an automation bandwagon.</li>
<li>I have long-term goals that dictate the necessity of automation.</li>
<li>But before I tell you more....</li>
</ul>
</div>

</article>
<article class="slide level-2" id="what-s-your-goal">
<h2>What's Your Goal?</h2>
<p>Seriously, what is/are the guiding principle(s) that govern how you build software?</p>

</article>
<article class="slide level-2" id="my-software-development-goal">
<h2>My Software Development Goal</h2>
<p>To sustainably:</p>
<ul class="simple">
<li>Respond to change with minimal friction</li>
<li>Frequently deliver highly functional software</li>
</ul>
<hr class="docutils" />
<p>Four components: flexibility, velocity, quality, &amp; cost</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Find the four components in the goal.</li>
<li>Where is the tension?</li>
<li>What is this?  Yes, Agile.</li>
<li>Quick question: is Scrum agile?  Is Agile scrum?</li>
<li>Agile is not Scrum, I'm sorry if Scrum or any other agile methodology has been a bad experience
for you.</li>
<li>Agile is a set of principles, Google Agile Manifesto for more info.</li>
<li>My goal is a distillation of the principles listed in the Agile Manifesto.</li>
<li>Remember the title of this talk.  This is my win!</li>
<li>Agree or Strongly Agree that this is a noble goal for just about any development team?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="delivering-on-that-goal">
<h2>Delivering on that Goal</h2>
<p><tt class="code docutils literal"><span class="pre">assert</span></tt>: Without heavy use of automated processes, especially testing, a truly agile workflow
is impossible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>&quot;truly agile workflow&quot; --&gt; my goal</li>
<li>Note that there are two components that need to be automated: testing and processes</li>
<li>The rest of this presentation is my attempt to convince you that this assertion is sound.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="let-s-talk-about-tests">
<h2>Let's talk about Tests!</h2>
<ul class="build simple">
<li>Are you usually testing your code?</li>
<li>Do you have automated tests for your code?</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>BUILD!!</li>
<li>How much of your time is spent testing functionality vs writing code?</li>
<li>If no, why?</li>
<li>If yes, % of production code covered by tests?</li>
<li>If yes, who writes those automated tests: developers or dedicated QA peeps?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="developers-need-to-write-tests">
<h2>Developers Need to Write Tests</h2>
<p><tt class="code docutils literal"><span class="pre">assert</span></tt>: If developers are not creating automated tests in parallel with the production code, a truly
agile workflow is unsustainable.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Frequently deliver <em>highly functional software</em></li>
<li>Highly functional software requires testing be done.</li>
<li>Most developers will manually test some of their code, but that's not enough to satisfy my
goal.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="reasons">
<h2>Reasons</h2>
<ul class="simple">
<li>Quick iterations and frequent changes cause bugs.</li>
<li>If you want high-quality software, you have to test for and fix bugs.</li>
<li>As code volume and complexity grows over time, it becomes impossible to
manually verify all functionality.</li>
<li>Without automation, the effort expended testing is wasted.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Respond to change with minimal friction and frequently deliver highly functional software</li>
</ul>
</div>

</article>
<article class="slide level-2" id="manual-testing-is-unsustainable">
<h2>Manual Testing is Unsustainable</h2>
<img alt="_images/code-ratio.png" class="fullpic" src="_images/code-ratio.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>How hard is it to manually test just the new functionality or bug fixes?</li>
<li>How much regression testing can be done?</li>
<li>If you have QA staff for this, is it reasonable to expect them to cover all the old
functionality?</li>
<li>Over time, regression testing will cover less and less code or the testing will just stop
being done.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="manual-testing-is-a-losing-battle">
<h2>Manual Testing is a Losing Battle</h2>
<img alt="_images/pisa.jpg" class="fullpic" src="_images/pisa.jpg" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>This is unsustainable</li>
<li>Remember my goal: To sustainably respond to change with minimal friction and frequently deliver
highly functional software</li>
</ul>
</div>

</article>
<article class="slide level-2" id="testing-asset-or-expense">
<h2>Testing: Asset or Expense</h2>
<ul class="simple">
<li>Manual testing is an expense</li>
<li>Automated testing is mostly an asset, with maintenance related expenses</li>
</ul>

</article>
<article class="slide level-2" id="automated-testing-saves-time">
<h2>Automated Testing Saves Time</h2>
<p>No...really.</p>
<p>In both the short-term and the long-term.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Why don't you test...it takes too much time.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="i-don-t-need-no-stink-n-tests">
<h2>I Don't Need No Stink'n Tests</h2>
<img alt="_images/simple-form.png" class="fullpic" src="_images/simple-form.png" />

</article>
<article class="slide level-2" id="i-don-t-need-ummm-help">
<h2>I Don't...Need....ummm...help?</h2>
<img alt="_images/complex-form.jpeg" class="fullpic" src="_images/complex-form.jpeg" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Yes, this is a little self-serving, we don't see that many forms that look like this.</li>
<li>But, doesn't the complexity of the software we are building more often resemble this example?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="time-savings-overall">
<h2>Time Savings Overall</h2>
<img alt="_images/roi-graph.png" class="fullpic" src="_images/roi-graph.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Does manual testing really get done thoroughly?  We've already said that's unlikely.</li>
<li>But I believe the graph still holds true because as software matures, if manual testing is
relied upon, the software development process becomes increasingly brittle and error prone,
slowing down developers, and forcing the organization to invest lots of time into manually
ensuring the software is not broken.</li>
<li>That can affect developers, QA staff, management, and customers as releases are delayed and
even simple changes take months to get released.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="a-final-plea">
<h2>A Final Plea</h2>
<ul class="simple">
<li>Manual testing is not sustainable, code quality will continually decrease as complexity increases.</li>
<li>You are already testing, capture the value!</li>
<li>Use devs for what they are good at (writing code to deal with repetition)</li>
<li>Use QA peeps for what they are good at (break it!, UI/UX, non-repetitive)</li>
<li>Just get started.  An object at rest...</li>
<li>Keep at it, it will become natural</li>
</ul>

</article>
<article class="slide level-2" id="ci-without-automated-tests">
<h2>CI without Automated Tests</h2>
<p>Neutered.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you don't have a quality test suite in place, start with that.</li>
<li>We operated for years with automated tests that ran on the dev's machine (not CI)</li>
<li>Your largest ROI will be in building the test suite, I can't really emphasize that enough.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="i-practice-what-i-preach">
<h2>I Practice What I Preach</h2>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">Proj A</th>
<th class="head">Proj B</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Age</td>
<td>6+ years</td>
<td>1.5 years</td>
</tr>
<tr class="row-odd"><td>Python Tests</td>
<td>8,294</td>
<td>1,444</td>
</tr>
<tr class="row-even"><td>JS Tests</td>
<td>309</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>DB Tables</td>
<td>200+</td>
<td>35+</td>
</tr>
<tr class="row-even"><td>Python LoC</td>
<td>145K</td>
<td>26.5K</td>
</tr>
<tr class="row-odd"><td>Python Test LoC</td>
<td>61K (42%)</td>
<td>14.7K (55%)</td>
</tr>
<tr class="row-even"><td>Code Coverage</td>
<td>95%</td>
<td>96%</td>
</tr>
<tr class="row-odd"><td>Test Time</td>
<td>39:04 (/4)</td>
<td>6:58</td>
</tr>
</tbody>
</table>
<p>Release interval: whenever (multiple times per day if needed)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>This isn't bragging, I just want to show you that it is doable.</li>
<li>I also want to give you some stats.</li>
<li>Notice the % LOC.  Who thinks the % LOC seems like a waste?</li>
<li>Anyone part of a 6 year project without automated tests?  How often are your releases and how
confident are you that you are not breaking things?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="delivering-on-my-goal-ci">
<h2>Delivering on my Goal (CI)</h2>
<p>Without heavy use of automated processes, especially testing, a truly agile workflow is impossible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>To sustainable respond to change with minimal friction and frequently deliver highly
functional software.</li>
<li>And I'm arguing that that the statement above is true.</li>
<li>I've talked about the testing part, but now I'm switching focus to process and CI in particular.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="our-development-workflow">
<h2>Our Development Workflow</h2>
<ul class="simple">
<li>Development on Git branch (prefer small changes)</li>
<li>PR for merge</li>
<li>Review code diff</li>
<li>Validate all tests pass</li>
<li>Validate linting</li>
<li>Validate code coverage</li>
<li>Some changes require manual QA</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Does this seem reasonable?</li>
<li>Will this contribute significantly to my goal?</li>
<li>Do you do this?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="workflow-execution-without-automation">
<h2>Workflow Execution without Automation</h2>
<p>How likely is it that workflow will get executed for every commit if not automated?</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>I've never met a developer that likes manual and repetitive tasks.</li>
<li>If he or she can't automate it, they will usually find a way to stop doing it.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="id1">
<h2>Delivering on that Goal</h2>
<p>Delivering on my goal: requires <strong>automated testing and processes</strong>, there is no other way.</p>
<p>Impossible to sustain manually!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>To sustainable respond to change with minimal friction and frequently deliver highly
functional software.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="workflow-review">
<h2>Workflow Review</h2>
<ul class="simple">
<li>Development on Git branch (prefer small changes)</li>
<li>PR for merge</li>
<li>Review code diff</li>
<li>Validate all tests pass</li>
<li>Validate linting</li>
<li>Validate code coverage</li>
<li>Some changes require manual QA</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Takes a good bit of work to do this manually.</li>
<li>How long to do this manually?</li>
</ul>
</div>

</article>
<article class="slide level-2" id="automated-workflow">
<h2>Automated Workflow</h2>
<img alt="_images/gh-pr-snapshot.png" class="fullpic" src="_images/gh-pr-snapshot.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>My dev's have no excuse for not following our workflow guidelines.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="more-than-a-process">
<h2>More than a Process</h2>
<p>It's about culture.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Good development practices are enforced through automation.</li>
<li>Enforce it or don't do it.</li>
<li>Leadership: invest in making important things easy.</li>
</ul>
</div>

</article>
<article class="slide level-2" id="ci-eat-the-elephant">
<h2>CI: Eat the Elephant</h2>
<p>Getting CI to run correctly is often frustrating.  Rabbit holes galore.</p>
<p>Focus on constant incremental improvements, building layer by layer.</p>

</article>
<article class="slide level-2" id="speaking-of-layers">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li><em>Tests/Linting/Coverage in a Virtual Env</em></li>
<li>Dependencies</li>
<li>Tox</li>
<li>Docker</li>
<li>CI (with Circle CI)</li>
<li>Code Coverage</li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="in-virtualenv">
<h2>In Virtualenv</h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">(pypicalc2)$</span> py.test pypicalc/
<span class="go">......................................</span>
<span class="go">38 passed in 0.12 seconds</span>
<span class="gp">(pypicalc2)$</span> flake8 pypicalc/
<span class="gp">(pypicalc2)$</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="with-code-coverage">
<h2>With Code Coverage</h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">(pypicalc2)$</span> py.test --cov pypicalc --cov-config .coveragerc pypicalc/
<span class="go">......................................</span>
<span class="go">---------------------------------- coverage: platform linux, python 3.5.2-final-0 -----------------------------------</span>
<span class="go">Name                                      Stmts   Miss Branch BrPart  Cover</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">pypicalc/app.py                              11      0      0      0   100%</span>
<span class="go">pypicalc/cli.py                               8      0      0      0   100%</span>

<span class="go">...&lt;snip&gt;...</span>

<span class="go">pypicalc/tests/test_web_request_3.py         27      6      4      0    68%</span>
<span class="go">pypicalc/tests/test_web_request_4.py         18      1      4      1    91%</span>
<span class="go">pypicalc/version.py                           1      0      0      0   100%</span>
<span class="go">pypicalc/views.py                            13      0      2      0   100%</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">TOTAL                                       628    102    115     19    78%</span>
<span class="go">38 passed in 0.24 seconds</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="id2">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li><em>Dependencies</em></li>
<li>Tox</li>
<li>Docker</li>
<li>CI (with Circle CI)</li>
<li>Code Coverage</li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="dependencies">
<h2>Dependencies</h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> tree requirements/
<span class="go">requirements/</span>
<span class="go">├── deployed-env.txt</span>
<span class="go">├── dev-env.txt</span>
<span class="go">├── includes</span>
<span class="go">│   ├── build-only.txt</span>
<span class="go">│   ├── ci.txt</span>
<span class="go">│   ├── common.txt</span>
<span class="go">│   ├── dev.txt</span>
<span class="go">│   └── install-only.txt</span>
<span class="go">├── wheelhouse</span>
<span class="go">│   ├── appdirs-1.4.0-py2.py3-none-any.whl</span>
<span class="go">│   ├── arrow-0.7.0-py3-none-any.whl</span>
<span class="go">│   ├── ...&lt;snip&gt;...</span>
<span class="go">└── wheelhouse-build.txt</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="id3">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li>Dependencies</li>
<li><em>Tox</em></li>
<li>Docker</li>
<li>CI (with Circle CI)</li>
<li>Code Coverage</li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="tox-summary">
<h2>Tox Summary</h2>
<ul class="simple">
<li>Creates virtualenvs</li>
<li>Installs dependencies from wheelhouse</li>
<li>Runs the tests w/ coverage</li>
<li>Runs the linter</li>
<li>Fails with a non-zero exit code if applicable</li>
</ul>

</article>
<article class="slide level-2" id="tox">
<h2>Tox</h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> tox
<span class="go">py35 runtests: commands[0] | pip install -r requirements/deployed-env.txt</span>
<span class="go">Ignoring indexes: https://pypi.python.org/simple</span>
<span class="go">Collecting Keg (from -r requirements/includes/install-only.txt (line 1))</span>
<span class="go">...&lt;snip&gt;...</span>
<span class="go">Installing collected packages: MarkupSafe, Jinja2, Werkzeug, itsdangerous, Flask, appdirs, blinker, pathlib, Click, wrapt, six, BlazeUtils, SQLAlchemy,</span>
<span class="go">...&lt;snip&gt;...</span>
<span class="go">py35 runtests: commands[1] | py.test -c .ci/pytest.ini -ra --tb native --strict --cov pypicalc --cov-config .coveragerc --cov-report xml --no-cov-on-fail --junit-xml=/home/rsyring/projects/pypicalc2-src/.ci/test-reports/py35.pytests.xml pypicalc</span>
<span class="go">================================================ test session starts ================================================</span>
<span class="go">platform linux -- Python 3.5.2, pytest-2.9.1, py-1.4.31, pluggy-0.3.1</span>
<span class="go">rootdir: /home/rsyring/projects/pypicalc2-src, inifile: .ci/pytest.ini</span>
<span class="go">plugins: cov-2.2.1</span>
<span class="go">collected 38 items</span>

<span class="go">pypicalc/tests/test_cli.py .</span>
<span class="go">...&lt;snip&gt;...</span>
<span class="go">pypicalc/tests/test_web_request_4.py .</span>

<span class="go">------------ generated xml file: /home/rsyring/projects/pypicalc2-src/.ci/test-reports/py35.pytests.xml -------------</span>
<span class="go">---------------------------------- coverage: platform linux, python 3.5.2-final-0 -----------------------------------</span>
<span class="go">Coverage XML written to file coverage.xml</span>
<span class="go">============================================= 38 passed in 0.30 seconds =============================================</span>

<span class="go">flake8 recreate: /home/rsyring/projects/pypicalc2-src/.tox/flake8</span>
<span class="go">flake8 installdeps: flake8</span>
<span class="go">flake8 runtests: commands[0] | flake8 pypicalc</span>
<span class="go">______________________________________________________ summary ______________________________________________________</span>
<span class="go">  py35: commands succeeded</span>
<span class="go">  flake8: commands succeeded</span>
<span class="go">  congratulations :)</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="id4">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li>Dependencies</li>
<li>Tox</li>
<li><em>Docker</em></li>
<li>CI (with Circle CI)</li>
<li>Code Coverage</li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="docker">
<h2>Docker</h2>
<p>The heart of the <tt class="code docutils literal"><span class="pre">docker-run-tests</span></tt> script:</p>
<div class="highlight-bash"><div class="highlight"><pre>docker run <span class="se">\</span>
    -v <span class="nv">$SRC_DPATH</span>:/opt/src <span class="se">\</span>
    -v <span class="nv">$ARTIFACTS_DPATH</span>:/opt/src/.ci/artifacts <span class="se">\</span>
    -v <span class="nv">$TEST_REPORTS_DPATH</span>:/opt/src/.ci/test-reports <span class="se">\</span>
    <span class="nv">$DOCKER_FLAGS</span> <span class="se">\</span>
    level12/python-test-multi
</pre></div>
</div>

</article>
<article class="slide level-2" id="id5">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li>Dependencies</li>
<li>Tox</li>
<li>Docker</li>
<li><em>CI (with Circle CI)</em></li>
<li>Code Coverage</li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="ci-is-so-simple">
<h2>CI is So Simple!! ;)</h2>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">machine</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">docker</span>

<span class="l-Scalar-Plain">test</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">override</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">/home/ubuntu/$CIRCLE_PROJECT_REPONAME/docker-run-tests</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="id6">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li>Dependencies</li>
<li>Tox</li>
<li>Docker</li>
<li>CI (with Circle CI)</li>
<li><em>Code Coverage</em></li>
<li>Service Integration (Slack, GitHub, Email)</li>
</ul>

</article>
<article class="slide level-2" id="code-coverage-w-codecov">
<h2>Code Coverage w/ CodeCov</h2>
<div class="highlight-python"><div class="highlight"><pre>py.test \
  ...&lt;snip&gt;...
  --cov pypicalc \
  --cov-config .coveragerc \
  --cov-report xml \
  --no-cov-on-fail \
  --junit-xml={toxinidir}/.ci/test-reports/{envname}.pytests.xml \
  pypicalc
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ls .ci/test-reports/
<span class="go">py35.pytests.xml</span>
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">deployment</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">codecov</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">branch</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/.*/</span>
    <span class="l-Scalar-Plain">commands</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash &lt;(curl -s https://codecov.io/bash) -t &lt;token&gt;</span>
</pre></div>
</div>

</article>
<article class="slide level-2" id="code-coverage-result">
<h2>Code Coverage Result</h2>
<img alt="_images/codecov-snapshot.png" class="fullpic" src="_images/codecov-snapshot.png" />
<p><a class="reference external" href="https://codecov.io/github/rsyring/pypicalc2?branch=master">And More</a></p>

</article>
<article class="slide level-2" id="id7">
<h2>Speaking of Layers</h2>
<ul class="simple">
<li>Tests/Linting/Coverage in a Virtual Env</li>
<li>Dependencies</li>
<li>Tox</li>
<li>Docker</li>
<li>CI (with Circle CI)</li>
<li>Code Coverage</li>
<li><em>Service Integration (Slack, GitHub, Email)</em></li>
</ul>

</article>
<article class="slide level-2" id="service-integration-slack">
<h2>Service Integration: Slack</h2>
<img alt="_images/slack-screenshot.png" class="fullpic" src="_images/slack-screenshot.png" />

</article>
<article class="slide level-2" id="service-integration-github">
<h2>Service Integration: GitHub</h2>
<img alt="_images/gh-pr-integration.png" class="fullpic" src="_images/gh-pr-integration.png" />

</article>
<article class="slide level-2" id="questions">
<h2>Questions?</h2>
<p>Thanks for attending.</p>
<div class="line-block">
<div class="line">By: Randy Syring</div>
<div class="line">Twitter: &#64;RandySyring</div>
<div class="line">Email: <a class="reference external" href="mailto:randy&#46;syring&#37;&#52;&#48;level12&#46;io">randy<span>&#46;</span>syring<span>&#64;</span>level12<span>&#46;</span>io</a></div>
<div class="line"><a class="reference external" href="https://github.com/rsyring/">https://github.com/rsyring/</a></div>
</div>
<p>Image credits:</p>
<ul class="simple">
<li><a class="reference external" href="http://reqtest.com/testing-blog/you-cant-work-agile-without-automated-testing/">Image Credit</a></li>
<li><a class="reference external" href="http://www.slideshare.net/lfingerman/test-automation-best-prcatices-with-soa-test-approach">Image Credit 2</a></li>
<li><a class="reference external" href="http://reqtest.com/testing-blog/you-cant-work-agile-without-automated-testing/">Example Project</a></li>
</ul>

</article>


</section>

<section id="slide_notes">

</section>

  </body>
</html>